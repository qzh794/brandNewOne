import{h as e,j as a,k as t,y as l,r,o as n,c as s,a as o,l as u,t as i,Q as d,w as c,F as p,m,x as v}from"./vendor.24bb91d8.js";import{b as f}from"./bread_crumb.4eb40394.js";import{_ as g,a as b}from"./edit_admin.9d1c5d88.js";import{_}from"./delete_admin.vue_vue&type=script&setup=true&lang.8060493b.js";import{b as y}from"./mitt.dc7cd694.js";import{r as w,s as h,f as C}from"./userinfor.d19d596f.js";import"./setting.1fe42162.js";import"./index.1dd724be.js";const k={class:"table-wrapped"},j={class:"table-top"},x={class:"table-header"},P={class:"search-wrapped"},I={class:"button-wrapped"},V={class:"table-content"},z={class:"table-footer"};var D=e({__name:"index",setup(e){const D=a(),E=a({first:"用户管理",second:"产品管理员"}),F=a(),M=a(),O=t({pageCount:1,currentPage:1}),Q=a(0),U=async()=>{const e=await C("产品管理员");Q.value=e.length,O.pageCount=Math.ceil(e.length/10)};U();(async()=>{M.value=await w(1,"产品管理员")})();const q=async e=>{O.currentPage=e,M.value=await w(O.currentPage,"产品管理员")};y.on("adminDialogOff",(async e=>{const a=O.currentPage;1==e&&U(),2==e&&(M.value=await w(O.currentPage,"产品管理员")),3==e&&(M.value=await w(O.currentPage,"产品管理员"),0==M.value.length&&(O.currentPage=a-1,U()))}));const A=a(),B=a(),G=a();return l((()=>{y.all.clear()})),(e,a)=>{const t=r("el-input"),l=r("el-button"),w=r("el-table-column"),C=r("el-table"),U=r("el-pagination");return n(),s(p,null,[o(f,{ref_key:"breadcrumb",ref:D,item:E.value},null,8,["item"]),u("div",k,[u("div",j,[u("div",x,[u("div",P,[o(t,{modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),class:"w-50 m-2",size:"large",placeholder:"输入账号进行搜索","prefix-icon":i(d),onChange:a[1]||(a[1]=e=>(async()=>{M.value=await h(F.value)})())},null,8,["modelValue","prefix-icon"])]),u("div",I,[o(l,{type:"primary",onClick:a[2]||(a[2]=e=>{return a=1,y.emit("createId",a),void A.value.open();var a})},{default:c((()=>[m("添加产品管理员")])),_:1})])]),u("div",V,[o(C,{data:M.value,style:{width:"100%"},border:""},{default:c((()=>[o(w,{type:"index",width:"50"}),o(w,{prop:"account",label:"账号"}),o(w,{prop:"name",label:"姓名"}),o(w,{prop:"sex",label:"性别"}),o(w,{prop:"department",label:"部门"}),o(w,{prop:"email",label:"邮箱"}),o(w,{prop:"update_time",label:"更新时间"},{default:c((({row:e})=>{var a;return[u("div",null,v(null==(a=e.update_time)?void 0:a.slice(0,10)),1)]})),_:1}),o(w,{label:"操作",width:"200"},{default:c((({row:e})=>[u("div",null,[o(l,{type:"success",onClick:a=>{return t=e.id,y.emit("editId",t),void B.value.open();var t}},{default:c((()=>[m("编辑")])),_:2},1032,["onClick"]),o(l,{type:"danger",onClick:a=>{return t=e.id,y.emit("deleteId",t),void G.value.open();var t}},{default:c((()=>[m("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])]),u("div",z,[o(U,{"page-size":1,"ccurrent-page":O.currentPage,"pager-count":7,total:Q.value,"page-count":O.pageCount,onCurrentChange:q,layout:"prev, pager, next"},null,8,["ccurrent-page","total","page-count"])])]),o(g,{ref_key:"Create",ref:A},null,512),o(b,{ref_key:"Edit",ref:B},null,512),o(_,{ref_key:"Delete",ref:G},null,512)],64)}}});export{D as default};
