import{h as e,j as a,k as t,y as l,r,o as n,c as s,a as o,l as u,t as i,Q as d,w as c,F as p,m}from"./vendor.24bb91d8.js";import{b as v}from"./bread_crumb.4eb40394.js";import{_ as f,a as g}from"./edit_admin.9d1c5d88.js";import{_ as b}from"./delete_admin.vue_vue&type=script&setup=true&lang.8060493b.js";import{r as y,s as _,f as w}from"./userinfor.d19d596f.js";import{b as h}from"./mitt.dc7cd694.js";import"./setting.1fe42162.js";import"./index.1dd724be.js";const C={class:"table-wrapped"},k={class:"table-top"},j={class:"table-header"},P={class:"search-wrapped"},x={class:"button-wrapped"},I={class:"table-content"},V={class:"table-footer"};var z=e({__name:"index",setup(e){const z=a(),D=a({first:"用户管理",second:"用户管理员"}),E=a(""),F=a(),M=t({pageCount:1,currentPage:1}),O=a(0),Q=async()=>{const e=await w("用户管理员");O.value=e.length,M.pageCount=Math.ceil(e.length/10)};Q();(async()=>{F.value=await y(1,"用户管理员")})();const U=async e=>{M.currentPage=e,F.value=await y(M.currentPage,"用户管理员")};h.on("adminDialogOff",(async e=>{const a=M.currentPage;1==e&&Q(),2==e&&(F.value=await y(M.currentPage,"产品管理员")),3==e&&(F.value=await y(M.currentPage,"产品管理员"),0==F.value.length&&(M.currentPage=a-1,Q()))}));const q=a(),A=a(),B=a();return l((()=>{h.all.clear()})),(e,a)=>{const t=r("el-input"),l=r("el-button"),y=r("el-table-column"),w=r("el-table"),Q=r("el-pagination");return n(),s(p,null,[o(v,{ref_key:"breadcrumb",ref:z,item:D.value},null,8,["item"]),u("div",C,[u("div",k,[u("div",j,[u("div",P,[o(t,{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),class:"w-50 m-2",size:"large",placeholder:"输入账号进行搜索","prefix-icon":i(d),onChange:a[1]||(a[1]=e=>(async()=>{F.value=await _(E.value)})())},null,8,["modelValue","prefix-icon"])]),u("div",x,[o(l,{type:"primary",onClick:a[2]||(a[2]=e=>{return a=2,h.emit("createId",a),void q.value.open();var a})},{default:c((()=>[m("添加用户管理员")])),_:1})])]),u("div",I,[o(w,{data:F.value,style:{width:"100%"},border:""},{default:c((()=>[o(y,{type:"index",width:"50"}),o(y,{prop:"account",label:"账号"}),o(y,{prop:"name",label:"姓名"}),o(y,{prop:"department",label:"部门"}),o(y,{prop:"email",label:"邮箱"}),o(y,{label:"操作"},{default:c((({row:e})=>[u("div",null,[o(l,{type:"success",onClick:a=>{return t=e.id,h.emit("editId",t),void A.value.open();var t}},{default:c((()=>[m("编辑")])),_:2},1032,["onClick"]),o(l,{type:"danger",onClick:a=>{return t=e.id,h.emit("deleteId",t),void B.value.open();var t}},{default:c((()=>[m("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])]),u("div",V,[o(Q,{"page-size":1,"ccurrent-page":M.currentPage,"pager-count":7,total:O.value,"page-count":M.pageCount,onCurrentChange:U,layout:"prev, pager, next"},null,8,["ccurrent-page","total","page-count"])])]),o(f,{ref_key:"Create",ref:q},null,512),o(g,{ref_key:"Edit",ref:A},null,512),o(b,{ref_key:"Delete",ref:B},null,512)],64)}}});export{z as default};
