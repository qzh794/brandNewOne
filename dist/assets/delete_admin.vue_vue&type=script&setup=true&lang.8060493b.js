import{b as e}from"./mitt.dc7cd694.js";import{j as a,k as s}from"./userinfor.d19d596f.js";import{h as t,j as l,y as o,r as u,o as r,A as n,w as c,l as d,a as i,m,c as v,n as p}from"./vendor.24bb91d8.js";const f={key:0},y={key:1},_={class:"dialog-footer"};var g=t({__name:"delete_admin",emits:["success"],setup(t,{expose:g,emit:j}){const b=l(),k=l(),w=l();e.on("deleteId",(e=>{b.value=e})),e.on("deleteUserId",(e=>{k.value=e.id,w.value=e.account}));const V=async()=>{if(b.value){0==(await a(b.value)).status?(p({message:"对管理员降职成功",type:"success"}),j("success"),h.value=!1):(p.error("对管理员降职失败"),h.value=!1)}if(k.value){0==(await s(k.value,w.value)).status?(p({message:"删除用户成功",type:"success"}),h.value=!1,e.emit("offDialog",1)):(p.error("删除用户失败"),h.value=!1)}},h=l(!1);return g({open:()=>{h.value=!0}}),o((()=>{e.all.clear()})),(e,a)=>{const s=u("el-button"),t=u("el-dialog");return r(),n(t,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),title:"删除操作",width:"30%",center:""},{footer:c((()=>[d("span",_,[i(s,{type:"primary",onClick:V},{default:c((()=>[m(" 确定 ")])),_:1})])])),default:c((()=>[b.value?(r(),v("span",f,"是否去掉此用户的管理员职位？删除后此用户将重新展现在用户列表中")):(r(),v("span",y,"请慎重操作，删除后此用户将永久失去登录资格"))])),_:1},8,["modelValue"])}}});export{g as _};
